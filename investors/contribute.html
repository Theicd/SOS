<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תרום לפרויקט SOS - תמוך ברשת החברתית המבוזרת</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap');
        
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Heebo', sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #0f0f1a 100%);
            color: #f8fafc;
            min-height: 100vh;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .tier-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        .tier-card:hover {
            transform: translateY(-8px);
        }
        
        .tier-card.selected {
            border-color: #667eea !important;
            box-shadow: 0 0 40px rgba(102, 126, 234, 0.3);
        }
        
        .tier-card.selected .tier-check {
            opacity: 1;
        }
        
        .tier-check {
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .floating-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.3;
            animation: float 8s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-20px) translateX(10px); }
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }
        
        .step-indicator {
            position: relative;
        }
        
        .step-indicator::after {
            content: '';
            position: absolute;
            top: 50%;
            left: -100%;
            width: 100%;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .step-indicator:first-child::after {
            display: none;
        }
        
        .step-indicator.active::after {
            background: linear-gradient(90deg, #667eea, #764ba2);
        }
        
        .step-indicator.completed .step-number {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .step-indicator.active .step-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            transition: all 0.3s;
        }
        
        .payment-method {
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .payment-method:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .payment-method.selected {
            border-color: #667eea !important;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .badge-preview {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
            50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.6); }
        }
        
        .success-animation {
            animation: success-pop 0.5s ease-out;
        }
        
        @keyframes success-pop {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #667eea;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Hide steps */
        .contribution-step { display: none; }
        .contribution-step.active { display: block; }
    </style>
</head>
<body>
    <!-- Background Orbs -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="floating-orb w-96 h-96 bg-purple-600" style="top: -10%; right: -10%;"></div>
        <div class="floating-orb w-80 h-80 bg-blue-600" style="bottom: 10%; left: -5%; animation-delay: -2s;"></div>
        <div class="floating-orb w-64 h-64 bg-pink-600" style="top: 50%; right: 20%; animation-delay: -4s;"></div>
    </div>

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-gray-900/60 backdrop-blur-xl border-b border-white/5">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-bold gradient-text">SOS</a>
                <a href="index.html" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                    <i class="fas fa-arrow-right"></i>
                    חזרה לדף הראשי
                </a>
            </div>
        </div>
    </header>

    <main class="relative z-10 pt-24 pb-16">
        <div class="container mx-auto px-4">
            
            <!-- Page Title -->
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">
                    <span class="gradient-text">תמוך בפרויקט SOS</span>
                </h1>
                <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                    הצטרף לקהילת התומכים וקבל הכרה והטבות בלעדיות
                </p>
            </div>

            <!-- Progress Steps -->
            <div class="flex justify-center mb-12">
                <div class="flex items-center gap-8 md:gap-16">
                    <div class="step-indicator active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="text-xs mt-2 text-center">בחירת חבילה</div>
                    </div>
                    <div class="step-indicator" data-step="2">
                        <div class="step-number">2</div>
                        <div class="text-xs mt-2 text-center">פרטים אישיים</div>
                    </div>
                    <div class="step-indicator" data-step="3">
                        <div class="step-number">3</div>
                        <div class="text-xs mt-2 text-center">תשלום</div>
                    </div>
                    <div class="step-indicator" data-step="4">
                        <div class="step-number">4</div>
                        <div class="text-xs mt-2 text-center">אישור</div>
                    </div>
                </div>
            </div>

            <!-- Step 1: Choose Tier -->
            <div id="step1" class="contribution-step active fade-in">
                <div class="max-w-5xl mx-auto">
                    <h2 class="text-2xl font-bold text-center mb-8">בחר את חבילת התמיכה שלך</h2>
                    
                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <!-- Supporter Tier - $50 -->
                        <div class="tier-card glass-card rounded-2xl p-6 border-2 border-transparent relative" data-tier="supporter" data-amount="50">
                            <div class="tier-check absolute top-4 left-4 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-check text-white"></i>
                            </div>
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-heart text-white text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-bold mb-1">תומך</h3>
                                <div class="text-3xl font-bold gradient-text">$50</div>
                                <div class="text-gray-500 text-sm">תרומה חד פעמית</div>
                            </div>
                            <ul class="space-y-3 text-sm text-gray-300 mb-6">
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>Badge תומך דיגיטלי</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>הכרה ברשימת התומכים</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>גישה לערוץ תומכים</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>עדכונים בלעדיים</span>
                                </li>
                            </ul>
                            <div class="text-center">
                                <span class="text-xs text-gray-500">התרומה המינימלית להצטרפות</span>
                            </div>
                        </div>

                        <!-- Builder Tier - $150 -->
                        <div class="tier-card glass-card rounded-2xl p-6 border-2 border-transparent relative" data-tier="builder" data-amount="150">
                            <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-4 py-1 rounded-full">
                                הכי פופולרי
                            </div>
                            <div class="tier-check absolute top-4 left-4 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-check text-white"></i>
                            </div>
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-hammer text-white text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-bold mb-1">בונה</h3>
                                <div class="text-3xl font-bold gradient-text">$150</div>
                                <div class="text-gray-500 text-sm">תרומה חד פעמית</div>
                            </div>
                            <ul class="space-y-3 text-sm text-gray-300 mb-6">
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>כל ההטבות של "תומך"</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>Badge בונה מוזהב</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>השתתפות בהצבעות קהילתיות</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>גישה מוקדמת לפיצ'רים</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>שם בדף התורמים</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Pioneer Tier - $500 -->
                        <div class="tier-card glass-card rounded-2xl p-6 border-2 border-transparent relative" data-tier="pioneer" data-amount="500">
                            <div class="tier-check absolute top-4 left-4 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-check text-white"></i>
                            </div>
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-crown text-white text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-bold mb-1">חלוץ</h3>
                                <div class="text-3xl font-bold gradient-text">$500</div>
                                <div class="text-gray-500 text-sm">תרומה חד פעמית</div>
                            </div>
                            <ul class="space-y-3 text-sm text-gray-300 mb-6">
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>כל ההטבות של "בונה"</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>Badge חלוץ פלטינום</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>פגישה עם הצוות</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>הכרה מיוחדת באתר</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>השפעה על כיוון הפיתוח</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Custom Amount -->
                    <div class="glass-card rounded-2xl p-6 max-w-md mx-auto mb-8">
                        <div class="text-center mb-4">
                            <span class="text-gray-400">או הזן סכום אחר</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-2xl font-bold text-gray-400">$</span>
                            <input 
                                type="number" 
                                id="customAmount" 
                                min="50" 
                                placeholder="מינימום 50"
                                class="input-field w-full px-4 py-3 rounded-xl text-xl font-bold text-center"
                            >
                        </div>
                        <p class="text-center text-gray-500 text-xs mt-2">תרומה מינימלית: $50</p>
                    </div>

                    <!-- Selected Summary -->
                    <div class="glass-card rounded-2xl p-6 max-w-lg mx-auto">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-gray-400">חבילה נבחרת:</span>
                            <span id="selectedTierName" class="font-bold">לא נבחר</span>
                        </div>
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-gray-400">סכום לתשלום:</span>
                            <span id="selectedAmount" class="text-2xl font-bold gradient-text">$0</span>
                        </div>
                        <button id="continueToStep2" disabled class="btn-primary w-full py-4 rounded-xl text-lg font-bold">
                            המשך לפרטים אישיים
                            <i class="fas fa-arrow-left mr-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Personal Details -->
            <div id="step2" class="contribution-step fade-in">
                <div class="max-w-xl mx-auto">
                    <h2 class="text-2xl font-bold text-center mb-8">פרטים אישיים</h2>
                    
                    <div class="glass-card rounded-2xl p-8">
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm text-gray-400 mb-2">שם מלא *</label>
                                <input 
                                    type="text" 
                                    id="fullName" 
                                    required
                                    placeholder="ישראל ישראלי"
                                    class="input-field w-full px-4 py-3 rounded-xl"
                                >
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-2">כתובת אימייל *</label>
                                <input 
                                    type="email" 
                                    id="email" 
                                    required
                                    placeholder="your@email.com"
                                    class="input-field w-full px-4 py-3 rounded-xl"
                                >
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-2">מפתח ציבורי (Nostr npub) - אופציונלי</label>
                                <input 
                                    type="text" 
                                    id="nostrPubkey" 
                                    placeholder="npub1..."
                                    class="input-field w-full px-4 py-3 rounded-xl font-mono text-sm"
                                >
                                <p class="text-xs text-gray-500 mt-1">לקבלת ה-Badge ישירות לחשבון שלך ברשת</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-2">איך להציג אותך? (אופציונלי)</label>
                                <input 
                                    type="text" 
                                    id="displayName" 
                                    placeholder="שם תצוגה או 'אנונימי'"
                                    class="input-field w-full px-4 py-3 rounded-xl"
                                >
                            </div>
                            
                            <div class="flex items-start gap-3">
                                <input 
                                    type="checkbox" 
                                    id="agreeTerms" 
                                    required
                                    class="w-5 h-5 mt-1 rounded"
                                >
                                <label for="agreeTerms" class="text-sm text-gray-400">
                                    אני מאשר/ת שקראתי והבנתי כי זוהי <strong class="text-white">תרומה לפרויקט</strong> ולא השקעה. 
                                    אין הבטחת תשואה, אין זכויות בעלות, ואין אפשרות לפדיון כספי.
                                    <a href="#" class="text-purple-400 hover:underline">קרא עוד</a>
                                </label>
                            </div>
                            
                            <div class="flex items-start gap-3">
                                <input 
                                    type="checkbox" 
                                    id="agreePublic" 
                                    class="w-5 h-5 mt-1 rounded"
                                >
                                <label for="agreePublic" class="text-sm text-gray-400">
                                    אני מסכים/ה להופיע ברשימת התומכים הפומבית
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex gap-4 mt-8">
                            <button id="backToStep1" class="flex-1 py-4 rounded-xl text-lg font-bold border border-white/20 hover:bg-white/5 transition-colors">
                                <i class="fas fa-arrow-right ml-2"></i>
                                חזרה
                            </button>
                            <button id="continueToStep3" class="flex-1 btn-primary py-4 rounded-xl text-lg font-bold">
                                המשך לתשלום
                                <i class="fas fa-arrow-left mr-2"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Payment -->
            <div id="step3" class="contribution-step fade-in">
                <div class="max-w-xl mx-auto">
                    <h2 class="text-2xl font-bold text-center mb-8">בחר אמצעי תשלום</h2>
                    
                    <div class="glass-card rounded-2xl p-8 mb-6">
                        <!-- Order Summary -->
                        <div class="bg-white/5 rounded-xl p-4 mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-400">חבילה:</span>
                                <span id="paymentTierName" class="font-bold">-</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-400">שם:</span>
                                <span id="paymentUserName" class="font-bold">-</span>
                            </div>
                            <div class="flex justify-between items-center pt-2 border-t border-white/10">
                                <span class="text-gray-400">סה"כ לתשלום:</span>
                                <span id="paymentTotal" class="text-2xl font-bold gradient-text">$0</span>
                            </div>
                        </div>
                        
                        <!-- Payment Methods -->
                        <div class="space-y-4 mb-6">
                            <h3 class="font-bold text-lg mb-4">אמצעי תשלום</h3>
                            
                            <div class="payment-method glass-card rounded-xl p-4 border-2 border-transparent flex items-center gap-4" data-method="card">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-credit-card text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-bold">כרטיס אשראי / דביט</div>
                                    <div class="text-sm text-gray-400">Visa, Mastercard, American Express</div>
                                </div>
                                <div class="w-6 h-6 rounded-full border-2 border-white/30 flex items-center justify-center">
                                    <div class="payment-check w-3 h-3 bg-purple-500 rounded-full hidden"></div>
                                </div>
                            </div>
                            
                            <div class="payment-method glass-card rounded-xl p-4 border-2 border-transparent flex items-center gap-4" data-method="crypto">
                                <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center">
                                    <i class="fab fa-bitcoin text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-bold">קריפטו</div>
                                    <div class="text-sm text-gray-400">Bitcoin, Ethereum, USDC</div>
                                </div>
                                <div class="w-6 h-6 rounded-full border-2 border-white/30 flex items-center justify-center">
                                    <div class="payment-check w-3 h-3 bg-purple-500 rounded-full hidden"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Credit Card Form (shown when card is selected) -->
                        <div id="cardForm" class="hidden space-y-4 mb-6 p-4 bg-white/5 rounded-xl">
                            <div>
                                <label class="block text-sm text-gray-400 mb-2">מספר כרטיס</label>
                                <input 
                                    type="text" 
                                    id="cardNumber" 
                                    placeholder="1234 5678 9012 3456"
                                    maxlength="19"
                                    class="input-field w-full px-4 py-3 rounded-xl font-mono"
                                >
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-2">תוקף</label>
                                    <input 
                                        type="text" 
                                        id="cardExpiry" 
                                        placeholder="MM/YY"
                                        maxlength="5"
                                        class="input-field w-full px-4 py-3 rounded-xl font-mono"
                                    >
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-2">CVV</label>
                                    <input 
                                        type="text" 
                                        id="cardCvv" 
                                        placeholder="123"
                                        maxlength="4"
                                        class="input-field w-full px-4 py-3 rounded-xl font-mono"
                                    >
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-2">שם בעל הכרטיס</label>
                                <input 
                                    type="text" 
                                    id="cardName" 
                                    placeholder="ISRAEL ISRAELI"
                                    class="input-field w-full px-4 py-3 rounded-xl"
                                >
                            </div>
                            <div class="flex items-center gap-2 text-xs text-gray-500">
                                <i class="fas fa-lock text-green-400"></i>
                                <span>התשלום מאובטח ומוצפן ע"י Transak</span>
                            </div>
                        </div>
                        
                        <!-- Crypto Info (shown when crypto is selected) -->
                        <div id="cryptoInfo" class="hidden space-y-4 mb-6 p-4 bg-white/5 rounded-xl">
                            <p class="text-sm text-gray-300">
                                לחיצה על "בצע תשלום" תעביר אותך לממשק התשלום של Transak,
                                שם תוכל לבחור את המטבע הקריפטוגרפי המועדף עליך.
                            </p>
                            <div class="flex gap-4 justify-center">
                                <div class="text-center">
                                    <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-1">
                                        <i class="fab fa-bitcoin text-white text-xl"></i>
                                    </div>
                                    <span class="text-xs text-gray-400">BTC</span>
                                </div>
                                <div class="text-center">
                                    <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-1">
                                        <i class="fab fa-ethereum text-white text-xl"></i>
                                    </div>
                                    <span class="text-xs text-gray-400">ETH</span>
                                </div>
                                <div class="text-center">
                                    <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-1">
                                        <i class="fas fa-dollar-sign text-white text-xl"></i>
                                    </div>
                                    <span class="text-xs text-gray-400">USDC</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex gap-4">
                            <button id="backToStep2" class="flex-1 py-4 rounded-xl text-lg font-bold border border-white/20 hover:bg-white/5 transition-colors">
                                <i class="fas fa-arrow-right ml-2"></i>
                                חזרה
                            </button>
                            <button id="processPayment" disabled class="flex-1 btn-primary py-4 rounded-xl text-lg font-bold flex items-center justify-center gap-2">
                                <span>בצע תשלום</span>
                                <i class="fas fa-lock"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Security Info -->
                    <div class="flex items-center justify-center gap-6 text-gray-500 text-sm">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-shield-alt text-green-400"></i>
                            <span>מאובטח</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-lock text-green-400"></i>
                            <span>הצפנת SSL</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-green-400"></i>
                            <span>PCI DSS</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Processing & Confirmation -->
            <div id="step4" class="contribution-step fade-in">
                <div class="max-w-xl mx-auto text-center">
                    
                    <!-- Processing State -->
                    <div id="processingState" class="hidden">
                        <div class="glass-card rounded-2xl p-12">
                            <div class="loading-spinner mx-auto mb-6" style="width: 60px; height: 60px; border-width: 4px;"></div>
                            <h2 class="text-2xl font-bold mb-2">מעבד את התשלום...</h2>
                            <p class="text-gray-400">אנא המתן, אל תסגור את הדף</p>
                        </div>
                    </div>
                    
                    <!-- Success State -->
                    <div id="successState" class="hidden">
                        <div class="glass-card rounded-2xl p-8">
                            <div class="success-animation w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                <i class="fas fa-check text-white text-4xl"></i>
                            </div>
                            
                            <h2 class="text-3xl font-bold mb-4 gradient-text">תודה על התמיכה!</h2>
                            <p class="text-gray-300 text-lg mb-8">התרומה שלך התקבלה בהצלחה</p>
                            
                            <!-- Transaction Details -->
                            <div class="bg-white/5 rounded-xl p-6 mb-8 text-right">
                                <h3 class="font-bold mb-4 text-center">פרטי העסקה</h3>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">מזהה עסקה:</span>
                                        <span id="txId" class="font-mono text-purple-400">-</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">סכום:</span>
                                        <span id="txAmount" class="font-bold">-</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">חבילה:</span>
                                        <span id="txTier" class="font-bold">-</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">תאריך:</span>
                                        <span id="txDate" class="font-bold">-</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Badge Preview -->
                            <div class="mb-8">
                                <h3 class="font-bold mb-4">ה-Badge שלך</h3>
                                <div id="badgePreview" class="badge-preview w-32 h-32 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto">
                                    <i class="fas fa-heart text-white text-4xl"></i>
                                </div>
                                <p class="text-gray-400 text-sm mt-2">יתווסף לפרופיל שלך ברשת</p>
                            </div>
                            
                            <!-- Next Steps -->
                            <div class="bg-purple-900/20 border border-purple-500/30 rounded-xl p-6 mb-8 text-right">
                                <h3 class="font-bold mb-3 text-purple-300">מה עכשיו?</h3>
                                <ul class="space-y-2 text-sm text-gray-300">
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-envelope text-purple-400 mt-1"></i>
                                        <span>שלחנו לך אישור במייל</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-badge-check text-purple-400 mt-1"></i>
                                        <span>ה-Badge יתווסף לחשבונך תוך 24 שעות</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-users text-purple-400 mt-1"></i>
                                        <span>קיבלת גישה לערוץ התומכים</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="flex gap-4">
                                <a href="https://theicd.github.io/SOS/videos.html" target="_blank" class="flex-1 btn-primary py-4 rounded-xl text-lg font-bold">
                                    <span>היכנס לרשת</span>
                                </a>
                                <a href="index.html" class="flex-1 py-4 rounded-xl text-lg font-bold border border-white/20 hover:bg-white/5 transition-colors">
                                    חזרה לדף הבית
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Legal Footer -->
    <footer class="bg-black/30 border-t border-white/5 py-8">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto text-center text-xs text-gray-500 space-y-2">
                <p>
                    <strong>הצהרה חשובה:</strong> 
                    תרומה ל-SOS אינה מהווה השקעה פיננסית. אין הבטחת תשואה, רווח או החזר כספי. 
                    התרומה מיועדת לתמיכה בפיתוח ותפעול הרשת ומעניקה זכויות קהילתיות בלבד.
                </p>
                <p>
                    התשלומים מעובדים באמצעות Transak, ספק תשלומים מוסדר המבצע KYC/AML. 
                    SOS אינה אוספת או שומרת פרטי כרטיסי אשראי.
                </p>
                <p class="pt-2">
                    <a href="#" class="text-purple-400 hover:underline">תנאי שימוש</a> · 
                    <a href="#" class="text-purple-400 hover:underline">מדיניות פרטיות</a> · 
                    <a href="#" class="text-purple-400 hover:underline">מדיניות החזרים</a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        // State
        let selectedTier = null;
        let selectedAmount = 0;
        let selectedPaymentMethod = null;
        let userData = {};

        // DOM Elements
        const tierCards = document.querySelectorAll('.tier-card');
        const customAmountInput = document.getElementById('customAmount');
        const selectedTierName = document.getElementById('selectedTierName');
        const selectedAmountEl = document.getElementById('selectedAmount');
        const continueToStep2 = document.getElementById('continueToStep2');
        const steps = document.querySelectorAll('.contribution-step');
        const stepIndicators = document.querySelectorAll('.step-indicator');

        // Tier Names
        const tierNames = {
            supporter: 'תומך',
            builder: 'בונה',
            pioneer: 'חלוץ',
            custom: 'תרומה מותאמת'
        };

        // Tier Selection
        tierCards.forEach(card => {
            card.addEventListener('click', () => {
                tierCards.forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                
                selectedTier = card.dataset.tier;
                selectedAmount = parseInt(card.dataset.amount);
                
                customAmountInput.value = '';
                updateSummary();
            });
        });

        // Custom Amount
        customAmountInput.addEventListener('input', () => {
            const value = parseInt(customAmountInput.value);
            
            tierCards.forEach(c => c.classList.remove('selected'));
            
            if (value >= 50) {
                selectedTier = 'custom';
                selectedAmount = value;
                
                // Select appropriate tier based on amount
                if (value >= 500) {
                    selectedTier = 'pioneer';
                } else if (value >= 150) {
                    selectedTier = 'builder';
                } else {
                    selectedTier = 'supporter';
                }
            } else {
                selectedTier = null;
                selectedAmount = 0;
            }
            
            updateSummary();
        });

        function updateSummary() {
            if (selectedTier && selectedAmount >= 50) {
                selectedTierName.textContent = tierNames[selectedTier] || 'תרומה מותאמת';
                selectedAmountEl.textContent = '$' + selectedAmount;
                continueToStep2.disabled = false;
            } else {
                selectedTierName.textContent = 'לא נבחר';
                selectedAmountEl.textContent = '$0';
                continueToStep2.disabled = true;
            }
        }

        // Step Navigation
        function goToStep(stepNumber) {
            steps.forEach(s => s.classList.remove('active'));
            document.getElementById('step' + stepNumber).classList.add('active');
            
            stepIndicators.forEach((indicator, index) => {
                indicator.classList.remove('active', 'completed');
                if (index + 1 < stepNumber) {
                    indicator.classList.add('completed');
                } else if (index + 1 === stepNumber) {
                    indicator.classList.add('active');
                }
            });
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Step 1 -> Step 2
        continueToStep2.addEventListener('click', () => {
            goToStep(2);
        });

        // Step 2 -> Step 1
        document.getElementById('backToStep1').addEventListener('click', () => {
            goToStep(1);
        });

        // Step 2 -> Step 3
        document.getElementById('continueToStep3').addEventListener('click', () => {
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            if (!fullName) {
                alert('אנא הזן את שמך המלא');
                return;
            }
            
            if (!email || !email.includes('@')) {
                alert('אנא הזן כתובת אימייל תקינה');
                return;
            }
            
            if (!agreeTerms) {
                alert('אנא אשר את תנאי השימוש');
                return;
            }
            
            userData = {
                fullName,
                email,
                nostrPubkey: document.getElementById('nostrPubkey').value.trim(),
                displayName: document.getElementById('displayName').value.trim(),
                agreePublic: document.getElementById('agreePublic').checked
            };
            
            // Update payment step
            document.getElementById('paymentTierName').textContent = tierNames[selectedTier];
            document.getElementById('paymentUserName').textContent = fullName;
            document.getElementById('paymentTotal').textContent = '$' + selectedAmount;
            
            goToStep(3);
        });

        // Step 3 -> Step 2
        document.getElementById('backToStep2').addEventListener('click', () => {
            goToStep(2);
        });

        // Payment Method Selection
        const paymentMethods = document.querySelectorAll('.payment-method');
        const cardForm = document.getElementById('cardForm');
        const cryptoInfo = document.getElementById('cryptoInfo');
        const processPaymentBtn = document.getElementById('processPayment');

        paymentMethods.forEach(method => {
            method.addEventListener('click', () => {
                paymentMethods.forEach(m => {
                    m.classList.remove('selected');
                    m.querySelector('.payment-check').classList.add('hidden');
                });
                
                method.classList.add('selected');
                method.querySelector('.payment-check').classList.remove('hidden');
                
                selectedPaymentMethod = method.dataset.method;
                
                if (selectedPaymentMethod === 'card') {
                    cardForm.classList.remove('hidden');
                    cryptoInfo.classList.add('hidden');
                } else {
                    cardForm.classList.add('hidden');
                    cryptoInfo.classList.remove('hidden');
                }
                
                processPaymentBtn.disabled = false;
            });
        });

        // Card Number Formatting
        document.getElementById('cardNumber').addEventListener('input', (e) => {
            let value = e.target.value.replace(/\s/g, '').replace(/\D/g, '');
            value = value.match(/.{1,4}/g)?.join(' ') || value;
            e.target.value = value;
        });

        // Card Expiry Formatting
        document.getElementById('cardExpiry').addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.slice(0, 2) + '/' + value.slice(2);
            }
            e.target.value = value;
        });

        // Process Payment
        processPaymentBtn.addEventListener('click', () => {
            goToStep(4);
            
            // Show processing
            document.getElementById('processingState').classList.remove('hidden');
            document.getElementById('successState').classList.add('hidden');
            
            // Simulate payment processing
            setTimeout(() => {
                // Generate transaction ID
                const txId = 'SOS-' + Date.now().toString(36).toUpperCase() + '-' + Math.random().toString(36).substr(2, 6).toUpperCase();
                
                // Update success state
                document.getElementById('txId').textContent = txId;
                document.getElementById('txAmount').textContent = '$' + selectedAmount;
                document.getElementById('txTier').textContent = tierNames[selectedTier];
                document.getElementById('txDate').textContent = new Date().toLocaleDateString('he-IL');
                
                // Update badge preview based on tier
                const badgePreview = document.getElementById('badgePreview');
                if (selectedTier === 'pioneer') {
                    badgePreview.className = 'badge-preview w-32 h-32 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto';
                    badgePreview.innerHTML = '<i class="fas fa-crown text-white text-4xl"></i>';
                } else if (selectedTier === 'builder') {
                    badgePreview.className = 'badge-preview w-32 h-32 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto';
                    badgePreview.innerHTML = '<i class="fas fa-hammer text-white text-4xl"></i>';
                } else {
                    badgePreview.className = 'badge-preview w-32 h-32 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto';
                    badgePreview.innerHTML = '<i class="fas fa-heart text-white text-4xl"></i>';
                }
                
                // Show success
                document.getElementById('processingState').classList.add('hidden');
                document.getElementById('successState').classList.remove('hidden');
                
            }, 2500);
        });
    </script>
</body>
</html>
