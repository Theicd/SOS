<!DOCTYPE html>
<html lang="he">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SphereOne Social – כניסה או יצירת פרופיל</title>
    <!-- חלק ראש (auth.html) – מגדיר את אייקון הלשונית באמצעות SVG מוטמע -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2064%2064%27%3E%3Cdefs%3E%3ClinearGradient%20id%3D%27bg%27%20x1%3D%270%25%27%20y1%3D%270%25%27%20x2%3D%27100%25%27%20y2%3D%27100%25%27%3E%3Cstop%20offset%3D%270%25%27%20stop-color%3D%272d9cff%27/%3E%3Cstop%20offset%3D%27100%25%27%20stop-color%3D%270a2c88%27/%3E%3C/linearGradient%3E%3CradialGradient%20id%3D%27halo%27%20cx%3D%2750%25%27%20cy%3D%2735%25%27%20r%3D%2760%25%27%3E%3Cstop%20offset%3D%270%25%27%20stop-color%3D%2792e6ff%27%20stop-opacity%3D%270.55%27/%3E%3Cstop%20offset%3D%27100%25%27%20stop-color%3D%2705173f%27%20stop-opacity%3D%270%27/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect%20x%3D%272%27%20y%3D%272%27%20width%3D%2760%27%20height%3D%2760%27%20rx%3D%2716%27%20fill%3D%27url(%23bg)%27/%3E%3Crect%20x%3D%272%27%20y%3D%272%27%20width%3D%2760%27%20height%3D%2760%27%20rx%3D%2716%27%20fill%3D%27url(%23halo)%27/%3E%3Cpath%20fill%3D%27%23ffffff%27%20stroke%3D%27%23d9ecff%27%20stroke-width%3D%272.6%27%20stroke-linejoin%3D%27round%27%20d%3D%27M47.5%2012.2c-5.7-3.7-12.4-5.6-20.8-5.6-11.6%200-20.4%204.3-20.4%2012.3%200%205.8%204.3%209.6%2013.6%2011.7l9.5%202.3c3.6%200.9%205.1%201.8%205.1%203.6%200%203-3.2%204.2-7.5%204.2-5.5%200-10.9-2-15.1-5.3l-6.7%209.8c6.3%205.6%2014.7%208.8%2024.2%208.8%2012.8%200%2020.8-6%2020.8-15.6%200-6.9-4.3-10.9-13.3-13.1l-8.7-2.1c-3.6-0.9-5-1.6-5-3.3%200-2.2%202.4-3.5%206.7-3.5%204.5%200%208.7%201.3%2012.3%203.7l6.4-9.9z%27/%3E%3C/svg%3E"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="./styles/auth.css" />
  </head>
  <body class="auth-body">
    <!-- מעטפת כללית (auth.html) – מארגנת את כל חלקי הדף הראשי | HYPER CORE TECH -->
    <div class="auth-surface">
      <!-- פס עליון (auth.html) – לוגו וסטטיסטיקות קצרות בהתאם לעיצוב החדש | HYPER CORE TECH -->
      <header class="auth-topbar" aria-label="סרגל עליון של SphereOne">
        <div class="auth-topbar__brand" aria-label="SphereOne">
          <span class="auth-topbar__logo" aria-hidden="true"></span>
          <div class="auth-topbar__titles">
            <span class="auth-topbar__name">SphereOne</span>
            <span class="auth-topbar__tagline">Social Network</span>
          </div>
        </div>
        <nav class="auth-topbar__nav" id="siteHeaderNav" aria-label="קישורי מידע על SphereOne"></nav>
        <div class="auth-topbar__stats" aria-label="מדדי רשת עדכניים">
          <div class="auth-topbar__stat">
            <span class="auth-topbar__stat-value">+12%</span>
            <span class="auth-topbar__stat-label">גידול שבועי</span>
          </div>
          <div class="auth-topbar__stat">
            <span class="auth-topbar__stat-value">$50.42</span>
            <span class="auth-topbar__stat-label">שווי חוזה</span>
          </div>
          <div class="auth-topbar__stat">
            <span class="auth-topbar__stat-value">+5.2%</span>
            <span class="auth-topbar__stat-label">פעילות רשת</span>
          </div>
        </div>
      </header>

      <!-- אזור ראשי (auth.html) – כותרת מרכזית וכרטיס פעולות לפי הדרישה החדשה | HYPER CORE TECH -->
      <main class="auth-main" aria-live="polite">
        <section class="auth-welcome" aria-label="ברכת כניסה">
          <h1 class="auth-welcome__title" style="display:none;">SphereOne – ברוכים הבאים</h1>
          <p class="auth-welcome__subtitle">הרשת החברתית המבוזרת שנשארת בבעלותכם</p>
        </section>

        <!-- כרטיס הזמנה לפעולה (auth.html) – מציג רק את שתי האופציות הקיימות -->
        <section class="auth-card auth-entry" id="authEntryPanel">
          <h1 class="auth-entry__title" style="display:none;">SphereOne – ברוכים הבאים</h1>
          <p class="auth-entry__subtitle" style="display:none;">בחרו את הדרך שלכם</p>
          <div class="auth-entry__actions">
            <button class="button-primary auth-entry__action" id="authEntryLoginButton">
              <i class="fa-solid fa-arrow-right-to-bracket" aria-hidden="true"></i>
              כניסה לחשבון קיים
            </button>
            <button class="button-secondary auth-entry__action" id="authEntryRegisterButton">
              <i class="fa-solid fa-user-plus" aria-hidden="true"></i>
              יצירת חשבון חדש
            </button>
          </div>
          <a href="#" class="button-link button-link--accent" data-modal="spearInfo">
            <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
            מה זה SPEAR ONE?
          </a>
        </section>

        <!-- כרטיס התחברות קיים (auth.html) – נשמר פונקציונלית ומועצב מחדש -->
        <section class="auth-card auth-card--import" aria-live="polite" hidden>
        <button class="auth-card__back" id="authBackToEntryFromLogin" aria-label="חזרה למסך הבחירה">
          <i class="fa-solid fa-arrow-right"></i>
          חזרה למסך הראשי
        </button>
        <!-- כותרת כרטיס התחברות – מבליטה את פעולת ההתחברות -->
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-door-open"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">מחכים לכם בפנים</h2>
              <p class="auth-card__subtitle">הדביקו את הקוד האישי שקיבלתם והמשיכו בדיוק מאיפה שהפסקתם</p>
            </div>
          </div>
        </header>
        <div class="auth-field auth-field--textarea">
          <label class="auth-field__label" for="authImportInput">
            <span class="auth-field__label-icon" aria-hidden="true">
              <i class="fa-solid fa-key"></i>
            </span>
            הקוד האישי שלכם
          </label>
          <textarea
            id="authImportInput"
            class="auth-textarea"
            placeholder="הדביקו כאן את הקוד שקיבלתם מאיתנו"
          ></textarea>
          <div class="auth-field__hint">
            <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
            זהו הקוד שקיבלתם במייל או ששמרתם אצלכם. הדביקו אותו במלואו והתחברו מיד.
          </div>
        </div>
        <div class="auth-actions auth-actions--stack">
          <button class="button-primary" id="authImportButton">
            <i class="fa-solid fa-arrow-right-to-bracket"></i>
            התחבר עם הקוד שלי
          </button>
        </div>
        <div class="auth-card__switch" aria-label="מעבר ליצירת חשבון חדש">
          <span class="auth-card__switch-divider" aria-hidden="true"></span>
          <span class="auth-card__switch-text">או</span>
          <span class="auth-card__switch-divider" aria-hidden="true"></span>
        </div>
        <button class="button-link button-link--accent" id="authGoCreateButton">
          <i class="fa-solid fa-user-plus" aria-hidden="true"></i>
          ליצור פרופיל חדש במקום
        </button>
        <div class="auth-status" id="authImportStatus"></div>
      </section>

      <!-- פאנל יצירת מפתח -->
      <section class="auth-card auth-card--create" id="authCreatePanel" aria-live="polite" hidden>
        <button class="auth-card__back" id="authBackToEntry" aria-label="חזרה למסך הבחירה">
          <i class="fa-solid fa-arrow-right"></i>
          חזרה למסך הראשי
        </button>
        <!-- כותרת כרטיס יצירה – מייצרת חוויית הרשמה קלה ונגישה -->
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-sparkles"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">הצטרפות בכמה שניות</h2>
              <p class="auth-card__subtitle">נכניס אימייל, נקבל קוד אישי, נאשר ששמרנו – ופנים לרשת</p>
            </div>
          </div>
        </header>
        <div class="auth-flow">
          <!-- חלק שלב אימייל (auth.html) – איסוף כתובת לקבלת קוד אישי -->
          <div class="auth-flow__step" id="authFlowEmailStep">
            <p class="auth-flow__hint">אנחנו רק מאמתים שהכתובת פנויה ועבורכם ניצור קוד חדש במקום. אין שליחת מיילים בשלב הזה.</p>
            <div class="auth-field">
              <label class="auth-field__label" for="authEmailInput">
                <span class="auth-field__label-icon" aria-hidden="true">
                  <i class="fa-solid fa-envelope"></i>
                </span>
                כתובת אימייל לקבלת הקוד
              </label>
              <input
                id="authEmailInput"
                class="auth-input"
                type="email"
                placeholder="example@mysphere.one"
                autocomplete="email"
              />
            </div>
            <div class="auth-actions auth-actions--primary">
              <button class="button-primary" id="authSendEmailButton">
                <i class="fa-solid fa-paper-plane"></i>
                בדקו שהכתובת פנויה
              </button>
            </div>
          </div>
          <!-- חלק שלב קוד (auth.html) – הצגת הקוד האישי והמשכיות התהליך -->
          <div class="auth-flow__step auth-flow__step--key" id="authFlowKeyStep" hidden>
            <div class="auth-actions auth-actions--back">
              <button class="button-link" id="authKeyBackButton">
                <i class="fa-solid fa-arrow-right"></i>
                רוצה לערוך את האימייל
              </button>
            </div>
            <p class="auth-flow__hint">קבלתם את הקוד האישי שלכם. שמרו אותו במקום בטוח – זה הכרטיס שלכם לרשת.</p>
            <div class="auth-field auth-field--textarea">
              <label class="auth-field__label" for="authCreateKey">
                <span class="auth-field__label-icon" aria-hidden="true">
                  <i class="fa-solid fa-shield"></i>
                </span>
                הקוד האישי שנוצר עבורכם
              </label>
              <textarea
                id="authCreateKey"
                class="auth-textarea"
                readonly
                placeholder="לחצו \"קבלו קוד\" כדי להציג אותו כאן"
              ></textarea>
            </div>
            <div class="auth-actions auth-actions--primary">
              <button class="button-primary" id="authGenerateButton">
                <i class="fa-solid fa-key"></i>
                קבלו את הקוד שלי
              </button>
            </div>
            <div class="auth-actions auth-actions--row">
              <button class="button-secondary" id="authCopyCreateButton" disabled>
                <i class="fa-solid fa-copy"></i>
                העתקה
              </button>
              <button class="button-secondary" id="authDownloadCreateButton" disabled>
                <i class="fa-solid fa-file-arrow-down"></i>
                שמירה לקובץ
              </button>
            </div>
            <div class="auth-share">
              <button class="button-secondary button-secondary--whatsapp" id="authShareWhatsappButton" disabled>
                <i class="fa-brands fa-whatsapp"></i>
                שלחו לי את הקוד בוואטסאפ
              </button>
            </div>
            <label class="auth-checkbox">
              <input type="checkbox" id="authCreateConfirm" />
              שמרתי את הקוד שלי במקום בטוח ואני מוכן להיכנס
            </label>
            <button class="button-primary" id="authContinueButton" disabled>
              כניסה לרשת החברתית
            </button>
          </div>
        </div>
        <div class="auth-status" id="authCreateStatus"></div>
      </section>
    </main>

      <!-- תפריט תחתון (auth.html) – יושב בתחתית גם בדסקטופ וגם במובייל עם אייקונים | HYPER CORE TECH -->
      <nav class="auth-bottom-nav" aria-label="תפריט ראשי">
        <a class="auth-bottom-nav__link" href="#" data-modal="spearInfo">
          <i class="fa-solid fa-network-wired"></i>
          מה זה SPEAR ONE?
        </a>
        <a class="auth-bottom-nav__link" href="#" data-modal="blockchainInfo">
          <i class="fa-solid fa-link"></i>
          טכנולוגיית Blockchain
        </a>
        <a class="auth-bottom-nav__link" href="#" data-modal="partnershipInfo">
          <i class="fa-solid fa-handshake"></i>
          חוזה שותפים
        </a>
      </nav>

      <!-- הודעה קופצת (auth.html) – מודאל למידע על SPEAR ONE | HYPER CORE TECH -->
      <div class="auth-modal" id="infoModal" aria-hidden="true">
        <div class="auth-modal__overlay"></div>
        <div class="auth-modal__container">
          <div class="auth-modal__content">
            <h2><span id="modalTitle"></span></h2>
            <!-- אזור שקופיות מודאל (auth.html) – מציג כל חלק בנפרד | HYPER CORE TECH -->
            <div class="auth-modal__slides" id="modalSlides"></div>
            <!-- בקרי ניווט לשקופיות (auth.html) – שליטה על מעבר קדימה/אחורה | HYPER CORE TECH -->
            <div class="auth-modal__controls" id="modalControls">
              <button class="auth-modal__control" type="button" id="modalPrev" aria-label="שקופית קודמת">
                <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
              </button>
              <div class="auth-modal__dots" id="modalDots" role="tablist" aria-label="ניווט שקופיות"></div>
              <button class="auth-modal__control" type="button" id="modalNext" aria-label="שקופית הבאה">
                <i class="fa-solid fa-chevron-left" aria-hidden="true"></i>
              </button>
            </div>
          </div>
          <button class="auth-modal__close" aria-label="סגור חלון">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
      </div>

    </div>

    <script src="https://unpkg.com/nostr-tools@2.7.2/lib/nostr.bundle.js"></script>
    <script src="./config.js"></script>
    <script src="./key-utils.js"></script>
    <script src="./keys.js"></script>
    <script src="./auth.js"></script>
  </body>
</html>
