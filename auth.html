<!DOCTYPE html>
<html lang="he">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SphereOne Social – כניסה או יצירת פרופיל</title>
    <!-- חלק ראש (auth.html) – מגדיר את אייקון הלשונית באמצעות SVG מוטמע -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2064%2064%27%3E%3Cdefs%3E%3ClinearGradient%20id%3D%27bg%27%20x1%3D%270%25%27%20y1%3D%270%25%27%20x2%3D%27100%25%27%20y2%3D%27100%25%27%3E%3Cstop%20offset%3D%270%25%27%20stop-color%3D%272d9cff%27/%3E%3Cstop%20offset%3D%27100%25%27%20stop-color%3D%270a2c88%27/%3E%3C/linearGradient%3E%3CradialGradient%20id%3D%27halo%27%20cx%3D%2750%25%27%20cy%3D%2735%25%27%20r%3D%2760%25%27%3E%3Cstop%20offset%3D%270%25%27%20stop-color%3D%2792e6ff%27%20stop-opacity%3D%270.55%27/%3E%3Cstop%20offset%3D%27100%25%27%20stop-color%3D%2705173f%27%20stop-opacity%3D%270%27/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect%20x%3D%272%27%20y%3D%272%27%20width%3D%2760%27%20height%3D%2760%27%20rx%3D%2716%27%20fill%3D%27url(%23bg)%27/%3E%3Crect%20x%3D%272%27%20y%3D%272%27%20width%3D%2760%27%20height%3D%2760%27%20rx%3D%2716%27%20fill%3D%27url(%23halo)%27/%3E%3Cpath%20fill%3D%27%23ffffff%27%20stroke%3D%27%23d9ecff%27%20stroke-width%3D%272.6%27%20stroke-linejoin%3D%27round%27%20d%3D%27M47.5%2012.2c-5.7-3.7-12.4-5.6-20.8-5.6-11.6%200-20.4%204.3-20.4%2012.3%200%205.8%204.3%209.6%2013.6%2011.7l9.5%202.3c3.6%200.9%205.1%201.8%205.1%203.6%200%203-3.2%204.2-7.5%204.2-5.5%200-10.9-2-15.1-5.3l-6.7%209.8c6.3%205.6%2014.7%208.8%2024.2%208.8%2012.8%200%2020.8-6%2020.8-15.6%200-6.9-4.3-10.9-13.3-13.1l-8.7-2.1c-3.6-0.9-5-1.6-5-3.3%200-2.2%202.4-3.5%206.7-3.5%204.5%200%208.7%201.3%2012.3%203.7l6.4-9.9z%27/%3E%3C/svg%3E"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="./styles/auth.css" />
  </head>
  <body class="auth-body">
    <!-- חלק וידאו רקע (auth.html) – מציג וידאו בלופ מאחורי התוכן -->
    <video class="auth-background-video" autoplay muted loop playsinline>
      <source src="https://cdn.pixabay.com/video/2019/04/27/23088-333074579_large.mp4" type="video/mp4" />
    </video>
    <!-- חלק HEADER עליון (auth.html) – מעטפת מותג SphereOne Social מותאמת לנייד ולדסקטופ -->
    <header class="site-header">
      <div class="site-header__brand" aria-label="SphereOne Social">
        <div class="site-header__title-group">
          <span class="site-header__brand-name">
            <span class="sos-morse sos-morse-s">S</span>phere <span class="sos-morse sos-morse-o">O</span>ne <span class="sos-morse sos-morse-s">S</span>ocial
          </span>
          <span class="site-header__tagline">הדוגמה החיה לטכנולוגיית SPEAR ONE</span>
        </div>
        <button
          class="site-header__menu-toggle"
          type="button"
          id="siteHeaderMenuToggle"
          aria-expanded="false"
          aria-controls="siteHeaderNav"
        >
          <i class="fa-solid fa-bars"></i>
        </button>
      </div>
      <!-- חלק תפריט מידע (auth.html) – הצגת דפי הסבר על הטכנולוגיה והמוצר -->
      <nav class="site-header__nav" id="siteHeaderNav" aria-label="תפריט מידע">
        <button class="site-header__nav-link" type="button" data-info-target="authInfoTechnologyPanel">הטכנולוגיה</button>
        <button class="site-header__nav-link" type="button" data-info-target="authInfoNetworkPanel">הרשת החברתית</button>
        <button class="site-header__nav-link" type="button" data-info-target="authInfoOnboardingPanel">איך מתחברים</button>
        <button class="site-header__nav-link" type="button" data-info-target="authInfoCreditsPanel">מסלולי פרימיום</button>
      </nav>
    </header>

    <!-- חלק HERO (auth.html) – מסר פתיחה כללי לרשת החברתית -->
    <section class="auth-hero">
      <h1 class="auth-hero__title">הבית החכם לדור החדש של הקהילות</h1>
      <p class="auth-hero__subtitle">התחברו או צרו חשבון בכמה קליקים – בלי מילים גדולות, רק חוויה</p>
    </section>

    <!-- חלק מעטפת מרכזית (auth.html) – שלבי בחירה, התחברות והרשמה -->
    <main class="auth-layout">
      <!-- כרטיס הזמנה לפעולה – בחירת התחברות או יצירה -->
      <section class="auth-card auth-entry" id="authEntryPanel" aria-live="polite">
        <h2 class="auth-entry__title">ברוכים הבאים ל-SphereOne Social</h2>
        <p class="auth-entry__subtitle">הקליקו כדי להיכנס או להצטרף. פשוט, מהיר ומרגיש כמו בית</p>
        <div class="auth-entry__actions">
          <button class="button-primary auth-entry__action" id="authEntryLoginButton">
            <i class="fa-solid fa-arrow-right-to-bracket" aria-hidden="true"></i>
            התחברות לחשבון קיים
          </button>
          <button class="button-secondary auth-entry__action" id="authEntryRegisterButton">
            <i class="fa-solid fa-user-plus" aria-hidden="true"></i>
            יצירת חשבון חדש
          </button>
        </div>
      </section>

      <!-- כרטיס התחברות – כולל כותרת עם אייקון ושדה קלט למפתח -->
      <section class="auth-card auth-card--import" aria-live="polite" hidden>
        <button class="auth-card__back" id="authBackToEntryFromLogin" aria-label="חזרה למסך הבחירה">
          <i class="fa-solid fa-arrow-right"></i>
          חזרה למסך הראשי
        </button>
        <!-- כותרת כרטיס התחברות – מבליטה את פעולת ההתחברות -->
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-door-open"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">מחכים לכם בפנים</h2>
              <p class="auth-card__subtitle">הדביקו את הקוד האישי שקיבלתם והמשיכו בדיוק מאיפה שהפסקתם</p>
            </div>
          </div>
        </header>
        <div class="auth-field auth-field--textarea">
          <label class="auth-field__label" for="authImportInput">
            <span class="auth-field__label-icon" aria-hidden="true">
              <i class="fa-solid fa-key"></i>
            </span>
            הקוד האישי שלכם
          </label>
          <textarea
            id="authImportInput"
            class="auth-textarea"
            placeholder="הדביקו כאן את הקוד שקיבלתם מאיתנו"
          ></textarea>
          <div class="auth-field__hint">
            <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
            זהו הקוד שקיבלתם במייל או ששמרתם אצלכם. הדביקו אותו במלואו והתחברו מיד.
          </div>
        </div>
        <div class="auth-actions auth-actions--stack">
          <button class="button-primary" id="authImportButton">
            <i class="fa-solid fa-arrow-right-to-bracket"></i>
            התחבר עם הקוד שלי
          </button>
        </div>
        <div class="auth-card__switch" aria-label="מעבר ליצירת חשבון חדש">
          <span class="auth-card__switch-divider" aria-hidden="true"></span>
          <span class="auth-card__switch-text">או</span>
          <span class="auth-card__switch-divider" aria-hidden="true"></span>
        </div>
        <button class="button-link button-link--accent" id="authGoCreateButton">
          <i class="fa-solid fa-user-plus" aria-hidden="true"></i>
          ליצור פרופיל חדש במקום
        </button>
        <div class="auth-status" id="authImportStatus"></div>
      </section>

      <!-- פאנל יצירת מפתח -->
      <section class="auth-card auth-card--create" id="authCreatePanel" aria-live="polite" hidden>
        <button class="auth-card__back" id="authBackToEntry" aria-label="חזרה למסך הבחירה">
          <i class="fa-solid fa-arrow-right"></i>
          חזרה למסך הראשי
        </button>
        <!-- כותרת כרטיס יצירה – מייצרת חוויית הרשמה קלה ונגישה -->
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-sparkles"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">הצטרפות בכמה שניות</h2>
              <p class="auth-card__subtitle">נכניס אימייל, נקבל קוד אישי, נאשר ששמרנו – ופנים לרשת</p>
            </div>
          </div>
        </header>
        <div class="auth-flow">
          <!-- חלק שלב אימייל (auth.html) – איסוף כתובת לקבלת קוד אישי -->
          <div class="auth-flow__step" id="authFlowEmailStep">
            <p class="auth-flow__hint">אנחנו רק מאמתים שהכתובת פנויה ועבורכם ניצור קוד חדש במקום. אין שליחת מיילים בשלב הזה.</p>
            <div class="auth-field">
              <label class="auth-field__label" for="authEmailInput">
                <span class="auth-field__label-icon" aria-hidden="true">
                  <i class="fa-solid fa-envelope"></i>
                </span>
                כתובת אימייל לקבלת הקוד
              </label>
              <input
                id="authEmailInput"
                class="auth-input"
                type="email"
                placeholder="example@mysphere.one"
                autocomplete="email"
              />
            </div>
            <div class="auth-actions auth-actions--primary">
              <button class="button-primary" id="authSendEmailButton">
                <i class="fa-solid fa-paper-plane"></i>
                בדקו שהכתובת פנויה
              </button>
            </div>
          </div>
          <!-- חלק שלב קוד (auth.html) – הצגת הקוד האישי והמשכיות התהליך -->
          <div class="auth-flow__step auth-flow__step--key" id="authFlowKeyStep" hidden>
            <div class="auth-actions auth-actions--back">
              <button class="button-link" id="authKeyBackButton">
                <i class="fa-solid fa-arrow-right"></i>
                רוצה לערוך את האימייל
              </button>
            </div>
            <p class="auth-flow__hint">קבלתם את הקוד האישי שלכם. שמרו אותו במקום בטוח – זה הכרטיס שלכם לרשת.</p>
            <div class="auth-field auth-field--textarea">
              <label class="auth-field__label" for="authCreateKey">
                <span class="auth-field__label-icon" aria-hidden="true">
                  <i class="fa-solid fa-shield"></i>
                </span>
                הקוד האישי שנוצר עבורכם
              </label>
              <textarea
                id="authCreateKey"
                class="auth-textarea"
                readonly
                placeholder="לחצו \"קבלו קוד\" כדי להציג אותו כאן"
              ></textarea>
            </div>
            <div class="auth-actions auth-actions--primary">
              <button class="button-primary" id="authGenerateButton">
                <i class="fa-solid fa-key"></i>
                קבלו את הקוד שלי
              </button>
            </div>
            <div class="auth-actions auth-actions--row">
              <button class="button-secondary" id="authCopyCreateButton" disabled>
                <i class="fa-solid fa-copy"></i>
                העתקה
              </button>
              <button class="button-secondary" id="authDownloadCreateButton" disabled>
                <i class="fa-solid fa-file-arrow-down"></i>
                שמירה לקובץ
              </button>
            </div>
            <div class="auth-share">
              <button class="button-secondary button-secondary--whatsapp" id="authShareWhatsappButton" disabled>
                <i class="fa-brands fa-whatsapp"></i>
                שלחו לי את הקוד בוואטסאפ
              </button>
            </div>
            <label class="auth-checkbox">
              <input type="checkbox" id="authCreateConfirm" />
              שמרתי את הקוד שלי במקום בטוח ואני מוכן להיכנס
            </label>
            <button class="button-primary" id="authContinueButton" disabled>
              כניסה לרשת החברתית
            </button>
          </div>
        </div>
        <div class="auth-status" id="authCreateStatus"></div>
      </section>
    </main>

    <!-- חלק דפי מידע (auth.html) – תוכן מפורט לכל כפתור בתפריט העליון -->
    <section class="auth-layout" id="authInfoPanels">
      <article class="auth-card auth-info-panel" id="authInfoTechnologyPanel" hidden>
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-microchip"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">SPEAR ONE – מנוע הטכנולוגיה</h2>
              <p class="auth-card__subtitle">שרת סטטי שמדגים איך רשת חברתית יכולה לפעול מבוזר, מהר ובטוח</p>
            </div>
          </div>
        </header>
        <p class="auth-flow__hint">אנו משתמשים בפרוטוקול Nostr לניהול שיחות ותוכן ללא נקודת כשל מרכזית. שכבת SPEAR ONE מחברת בין הרשת, תשלומים, ויכולות חוזה חכם כדי להציע חוויית משתמש חלקה – גם בארגונים שרוצים להפעיל את המערכת בעצמם.</p>
        <button class="button-secondary" type="button" data-info-close>הבנתי, חזרה למסך הראשי</button>
      </article>

      <article class="auth-card auth-info-panel" id="authInfoNetworkPanel" hidden>
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-people-group"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">SphereOne Social – הדגמה חיה</h2>
              <p class="auth-card__subtitle">קהילה אחת שמראה מה אפשר לבנות עם SPEAR ONE בלחיצת כפתור</p>
            </div>
          </div>
        </header>
        <p class="auth-flow__hint">כל מה שאתם רואים כאן – פידים, הודעות, משחקים וחוזים חכמים – רץ על גבי אותו מנוע. אנחנו מציגים איך ניתן להרחיב את היכולות ולהקים קהילות חדשות עם המיתוג והתוכן שלכם.</p>
        <button class="button-secondary" type="button" data-info-close>מעולה, סגרו את ההסבר</button>
      </article>

      <article class="auth-card auth-info-panel" id="authInfoOnboardingPanel" hidden>
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-person-walking"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">שלושה צעדים ואתם בפנים</h2>
              <p class="auth-card__subtitle">1. מזינים אימייל. 2. מקבלים קוד. 3. מאשרים ששמרתם – וזהו.</p>
            </div>
          </div>
        </header>
        <ul class="auth-flow__hint">
          <li>לחיצה על "בדקו שהכתובת פנויה" מאמתת מול הרשת שלא השתמשו באימייל הזה בעבר. אם הוא תפוס – תקבלו התרעה ידידותית.</li>
          <li>ברגע שהכתובת פנויה נציג מיד את הקוד האישי. אפשר להעתיק, להוריד או לשלוח לעצמכם בוואטסאפ.</li>
          <li>אחרי שסימנתם ששמרתם את הקוד, לחיצה על "כניסה לרשת" לוקחת אתכם ישר לעמוד הראשי.</li>
        </ul>
        <button class="button-secondary" type="button" data-info-close>חזרה למסך הכניסה</button>
      </article>

      <article class="auth-card auth-info-panel" id="authInfoCreditsPanel" hidden>
        <header class="auth-card__header">
          <div class="auth-card__title-row">
            <span class="auth-card__icon" aria-hidden="true">
              <i class="fa-solid fa-gem"></i>
            </span>
            <div class="auth-card__title-wrap">
              <h2 class="auth-card__title">מסלולי פרימיום וקרדיטים</h2>
              <p class="auth-card__subtitle">המערכת מוכנה להרחבה – הטמעה בארגון, מיתוג פרטי וחיבור לשירותים משלימים</p>
            </div>
          </div>
        </header>
        <p class="auth-flow__hint">יחידות הערך של SPEAR ONE מאפשרות לכם לרכוש חבילות שימוש, להפעיל ריליים פרטיים ולהתרחב לקהילות חדשות. בדקת החוזה החכם באתר תמצאו סימולציות מלאות שמציגות את הפוטנציאל הכלכלי.</p>
        <button class="button-secondary" type="button" data-info-close>מעולה, הבנתי</button>
      </article>
    </section>

    <script src="https://unpkg.com/nostr-tools@2.7.2/lib/nostr.bundle.js"></script>
    <script src="./config.js"></script>
    <script src="./key-utils.js"></script>
    <script src="./keys.js"></script>
    <script src="./auth.js"></script>
  </body>
</html>
